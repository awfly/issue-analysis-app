<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{/layout/layout}">
<head>
    <title>New issue</title>
</head>
<body>
<div layout:fragment="content">
    <br>
    <br>
    <h1>New Jira Issue</h1>
    <form class="ui large form" method="post" th:action="@{/issue/newJiraIssue}">
        <div class="field">
            <label>Subject</label>
            <input type="text" name="subject" placeholder="Subject"/>
        </div>

        <input type="button" value="Get stacktrace"  th:data1="${startDate}" th:onclick="javascript:getStackTrace(this.getAttribute('data1'));" >
        <script>
            async function getStackTrace(startDate) {
                return axios.get('/public/stacktrace', {
                    params: {
                        startDate : startDate
                    }
                })
                    .then(response => {
                    document.getElementById("stacktrace").value = response.data;
                })
            }
        </script>

        <div class="field">
            <label>Description</label>
            <textarea name="description"></textarea>
        </div>
        <div class="field">
            <label>Stacktrace</label>
            <textarea id="stacktrace" name="stacktrace"></textarea>
        </div>
        <button type="submit" class="ui primary button">create</button>
    </form>
</div>
</body>
</html>